{% extends "layout.njk" %}

{% block content %}
  <h1 class="text-2xl font-semibold mb-4">Audit Logs</h1>
  <div class="overflow-x-auto rounded border border-slate-800">
    <table class="min-w-full text-sm">
      <thead class="bg-slate-900 text-slate-400">
        <tr>
          <th class="px-3 py-2 text-left">Time</th>
          <th class="px-3 py-2 text-left">User</th>
          <th class="px-3 py-2 text-left">Operation</th>
          <th class="px-3 py-2 text-left">Table</th>
          <th class="px-3 py-2 text-left">Result</th>
        </tr>
      </thead>
      <tbody>
        {% for log in logs %}
          <tr class="border-t border-slate-900">
            <td class="px-3 py-2">{{ log.createdAt | date("YYYY-MM-DD HH:mm") }}</td>
            <td class="px-3 py-2">{{ log.user?.username or "system" }}</td>
            <td class="px-3 py-2">{{ log.operation }}</td>
            <td class="px-3 py-2 text-slate-400">{{ log.tableName }}</td>
            <td class="px-3 py-2">
              {% if log.success %}
                <span class="text-emerald-300">Success</span>
              {% else %}
                <span class="text-red-300">Failed</span>
              {% endif %}
            </td>
          </tr>
        {% else %}
          <tr>
            <td colspan="5" class="px-3 py-4 text-center text-slate-500">No logs yet.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}

